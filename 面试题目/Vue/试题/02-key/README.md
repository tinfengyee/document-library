## 你知道key的作用吗？

## 分析：

这是一道特别常见的问题，主要考查大家对虚拟DOM和patch细节的掌握程度，能够反映面试者理解层次。

## 思路分析：总分总模式

1. 给出结论，key的作用是用于优化patch性能
2. key的必要性
3. 实际使用方式
4. 总结：可从源码层面描述一下vue如何判断两个节点是否相同

## 回答范例：

1. key 作用是优化 diff 算法的效率，可以根据 key 直接在 oldKeyToIdx 查找旧节点是否有相同的，否则需要遍历旧节点。
2. key 作为唯一标识，在 sameVnode 中用来做判断条件，避免出现意外的就地复用情况。

它也可以用于强制替换元素/组件而不是重复使用它。当你遇到如下**场景**时它可能会很有用：

\- 完整地触发组件的生命周期钩子

\- 触发过渡

源码中找答案：src\core\vdom\patch.js - sameVnode()